<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Production Task (Browser)</title>
  <style>
    body { margin:0; padding:0; background:#000; color:#fff; font-family:"Noto Sans","Helvetica Neue",Arial,sans-serif; display:flex; justify-content:center; align-items:center; min-height:100vh; }
    body.running { cursor:none; }
    #app { width:100%; max-width:960px; padding:24px; box-sizing:border-box; text-align:center; }
    #config { margin-bottom:16px; background:#111; border:1px solid #333; border-radius:8px; padding:16px; }
    label { display:block; margin:8px 0; }
    input { padding:6px 10px; font-size:16px; border-radius:4px; border:1px solid #444; background:#222; color:#fff; }
    button { padding:10px 18px; font-size:16px; border:none; border-radius:6px; background:#2f80ed; color:#fff; cursor:pointer; }
    button:disabled { opacity:0.5; cursor:not-allowed; }
    #status { margin:12px 0; font-size:15px; color:#ccc; min-height:22px; }
    #stimulus-area { position:relative; width:100%; height:60vh; border:1px solid #333; border-radius:8px; background:#000; display:flex; align-items:center; justify-content:center; overflow:hidden; }
    #stimulus-img { max-width:90%; max-height:90%; display:none; }
    #fixation, #message { position:absolute; font-size:48px; font-weight:600; display:none; }
    #log { margin-top:12px; font-size:14px; color:#aaa; min-height:20px; }
    #download-btn { margin-top:16px; background:#27ae60; }
    .hidden { display:none !important; }
  </style>
</head>
<body>
  <div id="app">
    <h1>Production Task</h1>
    <div id="config">
      <label>参加者ID (例: 001)
        <input id="participant-id" type="text" placeholder="001" />
      </label>
      <div style="color:#ccc; font-size:14px; line-height:1.6; text-align:left;">
        <strong>実施前に確認してください：</strong>
        <ul style="margin:8px 0 0 18px; padding:0;">
          <li>所要時間: 約4分（24試行・録音6秒/ITI1.5秒）</li>
          <li>提示語数: 24語（各1回）</li>
          <li>ランダム順: 前半12語と後半12語をIDシードでシャッフルし交互提示</li>
          <li>マイク録音を行います。開始前に許可ダイアログへの対応をお願いします</li>
          <li>全画像プリロード完了後、スペースキーで開始します</li>
        </ul>
      </div>
      <button id="preload-btn">プリロード開始</button>
    </div>
    <div id="status"></div>
    <div id="stimulus-area">
      <img id="stimulus-img" alt="stimulus" />
      <div id="fixation">+</div>
      <div id="message"></div>
    </div>
    <div id="log"></div>
    <button id="start-btn" class="hidden">スペースキーで開始</button>
    <button id="download-btn" class="hidden">結果(zip)をダウンロード</button>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
